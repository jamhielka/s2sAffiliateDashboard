{"remainingRequest":"D:\\JK2L2\\BUCKET\\s2sTracker\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JK2L2\\BUCKET\\s2sTracker\\src\\views\\pages\\Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JK2L2\\BUCKET\\s2sTracker\\src\\views\\pages\\Dashboard.vue","mtime":1648781679438},{"path":"D:\\JK2L2\\BUCKET\\s2sTracker\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648442351798},{"path":"D:\\JK2L2\\BUCKET\\s2sTracker\\node_modules\\babel-loader\\lib\\index.js","mtime":1648442351661},{"path":"D:\\JK2L2\\BUCKET\\s2sTracker\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648442351798},{"path":"D:\\JK2L2\\BUCKET\\s2sTracker\\node_modules\\vue-loader\\lib\\index.js","mtime":1648442496749}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovL2ltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7DQppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7DQppbXBvcnQgU2NoZWR1bGVEaWFsb2cgZnJvbSAiLi4vZGlhbG9ncy9zY2hlZHVsaW5nLnZ1ZSI7DQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBTY2hlZHVsZURpYWxvZywNCiAgfSwNCiAgZGF0YTogKCkgPT4gKHsNCiAgICBzZWFyY2g6ICIiLA0KICAgIGVtcGxveWVlczogW10sDQogICAgc2NoZWR1bGVkRGF0YToge30sDQogICAgc2NoZWR1bGVEaWFsb2c6IHsgZGlhbG9nOiBmYWxzZSB9LA0KICAgIGhlYWRlcnM6IFtdLA0KICAgIGRlc3NlcnRzOiBbXSwNCiAgICBleHBvcnREYXRhOiBbXSwNCiAgICBmaWxlTmFtZTogIiIsDQogIH0pLA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0RXZlbnRzKCk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBnZXRFdmVudHMoKSB7DQogICAgICAvL0FQSQ0KDQogICAgICB2YXIgVFRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIik7DQogICAgICAvLy9jb25zb2xlLmxvZyhUVG9rZW4pOw0KICAgICAgdGhpcy4kYXBpDQogICAgICAgIC5nZXQoImFkbWluL3NjaGVkdWxlIiwgew0KICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IFRUb2tlbiwNCiAgICAgICAgICB9LA0KICAgICAgICB9KQ0KDQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKCJkYXRhIiwgcmVzcG9uc2UuZGF0YSk7DQogICAgICAgICAgLy90aGlzLmVtcGxveWVlcyA9IHJlc3BvbnNlLmRhdGEuZGF0YS5lbXBsb3llZXM7DQogICAgICAgICAgY29uc3QgbmV3RW1wbG95ZWVzID0gcmVzcG9uc2UuZGF0YS5kYXRhLmVtcGxveWVlczsNCiAgICAgICAgICBjb25zdCBuZXdIZWFkZXJzID0gcmVzcG9uc2UuZGF0YS5kYXRhLmhlYWRlcnM7DQoNCiAgICAgICAgICB2YXIgb2JqID0ge307DQogICAgICAgICAgLy9IRUFERVJTIFRBQkxFDQogICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBuZXdIZWFkZXJzLmxlbmd0aDsgeSsrKSB7DQogICAgICAgICAgICB0aGlzLnRtcCA9IHsNCiAgICAgICAgICAgICAgdGV4dDogbmV3SGVhZGVyc1t5XSwNCiAgICAgICAgICAgICAgdmFsdWU6IG5ld0hlYWRlcnNbeV0sDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgdGhpcy5oZWFkZXJzLnB1c2godGhpcy50bXApOw0KICAgICAgICAgIH0NCiAgICAgICAgICAvL0hFQURFUlMgVEFCTEUNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld0VtcGxveWVlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgY29uc3QgbmV3U2NoZWR1bGVzID0gbmV3RW1wbG95ZWVzW2ldLnNjaGVkdWxlczsNCiAgICAgICAgICAgIHRoaXMudG1wMiA9IHsNCiAgICAgICAgICAgICAgZW1wbG95ZWVJZDogbmV3RW1wbG95ZWVzW2ldLmVtcGxveWVlSWQsDQogICAgICAgICAgICAgICJFbXBsb3llZSBOYW1lIjogbmV3RW1wbG95ZWVzW2ldLmZ1bGxOYW1lLA0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBuZXdTY2hlZHVsZXMubGVuZ3RoOyB4KyspIHsNCiAgICAgICAgICAgICAgb2JqWyJXb3JraW5nIEhvdXJzIl0gPSBuZXdFbXBsb3llZXNbaV0uc3VtbWFyeS53b3JraW5nSG91cnM7DQogICAgICAgICAgICAgIG9ialsiT1QiXSA9IG5ld0VtcGxveWVlc1tpXS5zdW1tYXJ5Lm90Ow0KICAgICAgICAgICAgICBvYmpbIkhvbGlkYXkiXSA9IG5ld0VtcGxveWVlc1tpXS5zdW1tYXJ5LmhvbGlkYXk7DQogICAgICAgICAgICAgIG9ialsiTGVhdmUiXSA9IG5ld0VtcGxveWVlc1tpXS5zdW1tYXJ5LmxlYXZlOw0KICAgICAgICAgICAgICBvYmpbDQogICAgICAgICAgICAgICAgbW9tZW50KG5ld1NjaGVkdWxlc1t4XVsic2NoZWR1bGVEYXRlTGFiZWwiXSkuZm9ybWF0KA0KICAgICAgICAgICAgICAgICAgIk1NLURELVlZWVkiDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICBdID0gbmV3U2NoZWR1bGVzW3hdWyJ0aW1lTGFiZWwiXTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gIH0NCiAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMudG1wMiwgb2JqKTsNCiAgICAgICAgICAgIC8vY29uc29sZS5sb2cobWVyZ2VkKTsNCiAgICAgICAgICAgIHRoaXMuZGVzc2VydHMucHVzaChtZXJnZWQpOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLmV4cG9ydERhdGEgPSB0aGlzLmRlc3NlcnRzOw0KICAgICAgICAgIHRoaXMuZmlsZU5hbWUgPSBgRFJTXyR7bW9tZW50KG1vbWVudCgpLnRvRGF0ZSgpKS5mb3JtYXQoDQogICAgICAgICAgICAiTU1NX0REX1lZWVkiDQogICAgICAgICAgKX1gOw0KICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZGVzc2VydHMpOw0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuaGVhZGVycyk7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZSkgPT4gew0KICAgICAgICAgIC8vdGhpcy50YWJsZS5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgY29uc29sZS5sb2coZSk7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0RXZlbnRDb2xvcihldmVudCkgew0KICAgICAgcmV0dXJuIGV2ZW50LmNvbG9yOw0KICAgIH0sDQogICAgcm5kKGEsIGIpIHsNCiAgICAgIHJldHVybiBNYXRoLmZsb29yKChiIC0gYSArIDEpICogTWF0aC5yYW5kb20oKSkgKyBhOw0KICAgIH0sDQogICAgc2hvd0V2ZW50KHsgbmF0aXZlRXZlbnQsIGV2ZW50IH0pIHsNCiAgICAgIGNvbnN0IG9wZW4gPSAoKSA9PiB7DQogICAgICAgIHRoaXMuc2VsZWN0ZWRFdmVudCA9IGV2ZW50Ow0KICAgICAgICB0aGlzLnNlbGVjdGVkRWxlbWVudCA9IG5hdGl2ZUV2ZW50LnRhcmdldDsNCiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+DQogICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+ICh0aGlzLnNlbGVjdGVkT3BlbiA9IHRydWUpKQ0KICAgICAgICApOw0KICAgICAgfTsNCg0KICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRPcGVuKSB7DQogICAgICAgIHRoaXMuc2VsZWN0ZWRPcGVuID0gZmFsc2U7DQogICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gb3BlbigpKSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBvcGVuKCk7DQogICAgICB9DQoNCiAgICAgIG5hdGl2ZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOw0KICAgIH0sDQogICAgU2V0U2NoZWR1bGUoaXRlbSkgew0KICAgICAgLy9jb25zb2xlLmxvZygiU2NoZWR1bGUiICsgaXRlbS5lbXBsb3llZUlkKTsNCiAgICAgIHRoaXMuc2NoZWR1bGVkRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pOw0KDQogICAgICB0aGlzLnNjaGVkdWxlRGlhbG9nLmRpYWxvZyA9IHRydWU7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Dashboard.vue","sourceRoot":"src/views/pages","sourcesContent":["<template>\r\n  <div class=\"admin-schedule\">\r\n    <!-- <v-card-title>\r\n      Employee Scheduling\r\n      <v-spacer></v-spacer>\r\n      <v-text-field\r\n        v-model=\"search\"\r\n        append-icon=\"mdi-magnify\"\r\n        label=\"Search\"\r\n        single-line\r\n        hide-details\r\n      ></v-text-field>\r\n    </v-card-title>\r\n    <v-simple-table  :search=\"search\">\r\n      <template v-slot:default>\r\n        <thead>\r\n          <tr>\r\n            <th v-for=\"header in headers\" :key=\"header\">{{ header }}</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"employee in employees\" :key=\"employee._id\">\r\n            <td>{{ employee.fullName }}</td>\r\n            <td\r\n              @click=\"SetSchedule(employee)\"\r\n              v-for=\"schedule in employee.schedules\"\r\n              :key=\"schedule.scheduleDate\"\r\n            >\r\n              <span v-if=\"schedule.hasSchedule\">{{ schedule.timeLabel }} </span>\r\n            </td>\r\n            <td>{{ employee.summary.workingHours }}</td>\r\n            <td>{{ employee.summary.ot }}</td>\r\n            <td>{{ employee.summary.holiday }}</td>\r\n            <td>{{ employee.summary.leave }}</td>\r\n          </tr>\r\n        </tbody>\r\n      </template>\r\n    </v-simple-table> -->\r\n\r\n    <v-card>\r\n      <v-card-title>\r\n        Scheduling\r\n        <v-spacer></v-spacer>\r\n        <v-text-field\r\n          v-model=\"search\"\r\n          append-icon=\"mdi-magnify\"\r\n          label=\"Search\"\r\n          single-line\r\n          hide-details\r\n        ></v-text-field>\r\n\r\n        <v-btn color=\"primary\" class=\"ml-auto\">\r\n          <download-csv :data=\"exportData\" :name=\"`${fileName}.csv`\">\r\n            <v-icon dense>mdi-download</v-icon>\r\n            Export\r\n          </download-csv>\r\n        </v-btn>\r\n      </v-card-title>\r\n      <v-data-table\r\n        @click:row=\"SetSchedule\"\r\n        item-key=\"name\"\r\n        single-select\r\n        :headers=\"headers\"\r\n        :items=\"desserts\"\r\n        :search=\"search\"\r\n      >\r\n        <!-- <template slot-scope=\"props\">\r\n        <tr>\r\n          <th>          \r\n          </th>\r\n          <th\r\n            v-for=\"header in props.headers\"\r\n            :key=\"header.text\"\r\n            :class=\"freezeheader\"\r\n          >\r\n            <v-icon small>arrow_upward</v-icon>\r\n            {{ header.text }}\r\n          </th>\r\n        </tr>\r\n      </template>\r\n       <template slot=\"items\" slot-scope=\"props\">\r\n        <tr>         \r\n          <td class=\"text-xs-left headcol\">{{ props.item[\"Employee Name\"] }}</td>\r\n          \r\n        </tr>\r\n      </template> -->\r\n      </v-data-table>\r\n    </v-card>\r\n\r\n    <ScheduleDialog\r\n      :data=\"scheduledData\"\r\n      :dialog=\"scheduleDialog.dialog\"\r\n      @close=\"scheduleDialog.dialog = !scheduleDialog.dialog\"\r\n      @SchedItemConfirm=\"SchedItemConfirm()\"\r\n    ></ScheduleDialog>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.table > tr > td:nth-child(1),\r\n.table > thead > tr > th:nth-child(1) {\r\n  position: sticky !important;\r\n  position: -webkit-sticky !important;\r\n  left: 0 !important;\r\n  z-index: 1 !important;\r\n  background: white !important;\r\n}\r\n.table > thead > tr > th:nth-child(1) {\r\n  z-index: 1 !important;\r\n}\r\n.table > tbody > tr > td:nth-child(1) {\r\n  border-right: 1px solid rgb(12, 1, 1) !important;\r\n}\r\n.table > thead > tr > th:nth-child(1) {\r\n  border-right: 1px solid rgb(12, 1, 1) !important;\r\n}\r\n.headcol {\r\n  position: absolute;\r\n  width: 30%;\r\n  left: 0;\r\n  background: #eee;\r\n  text-align: center !important;\r\n  padding-top: 10px !important;\r\n}\r\n.fluid-table tr:first-child td {\r\n  font-weight: bold;\r\n  background: #fff !important;\r\n}\r\n.scrollsettings {\r\n  margin-left: 30%;\r\n  width: 800px;\r\n}\r\n</style>\r\n<script>\r\n//import axios from \"axios\";\r\nimport moment from \"moment\";\r\nimport ScheduleDialog from \"../dialogs/scheduling.vue\";\r\nexport default {\r\n  components: {\r\n    ScheduleDialog,\r\n  },\r\n  data: () => ({\r\n    search: \"\",\r\n    employees: [],\r\n    scheduledData: {},\r\n    scheduleDialog: { dialog: false },\r\n    headers: [],\r\n    desserts: [],\r\n    exportData: [],\r\n    fileName: \"\",\r\n  }),\r\n  created() {\r\n    this.getEvents();\r\n  },\r\n  methods: {\r\n    getEvents() {\r\n      //API\r\n\r\n      var TToken = localStorage.getItem(\"token\");\r\n      ///console.log(TToken);\r\n      this.$api\r\n        .get(\"admin/schedule\", {\r\n          headers: {\r\n            Authorization: TToken,\r\n          },\r\n        })\r\n\r\n        .then((response) => {\r\n          console.log(\"data\", response.data);\r\n          //this.employees = response.data.data.employees;\r\n          const newEmployees = response.data.data.employees;\r\n          const newHeaders = response.data.data.headers;\r\n\r\n          var obj = {};\r\n          //HEADERS TABLE\r\n          for (var y = 0; y < newHeaders.length; y++) {\r\n            this.tmp = {\r\n              text: newHeaders[y],\r\n              value: newHeaders[y],\r\n            };\r\n            this.headers.push(this.tmp);\r\n          }\r\n          //HEADERS TABLE\r\n          for (var i = 0; i < newEmployees.length; i++) {\r\n            const newSchedules = newEmployees[i].schedules;\r\n            this.tmp2 = {\r\n              employeeId: newEmployees[i].employeeId,\r\n              \"Employee Name\": newEmployees[i].fullName,\r\n            };\r\n\r\n            for (var x = 0; x < newSchedules.length; x++) {\r\n              obj[\"Working Hours\"] = newEmployees[i].summary.workingHours;\r\n              obj[\"OT\"] = newEmployees[i].summary.ot;\r\n              obj[\"Holiday\"] = newEmployees[i].summary.holiday;\r\n              obj[\"Leave\"] = newEmployees[i].summary.leave;\r\n              obj[\r\n                moment(newSchedules[x][\"scheduleDateLabel\"]).format(\r\n                  \"MM-DD-YYYY\"\r\n                )\r\n              ] = newSchedules[x][\"timeLabel\"];\r\n            }\r\n\r\n            //  }\r\n            const merged = Object.assign({}, this.tmp2, obj);\r\n            //console.log(merged);\r\n            this.desserts.push(merged);\r\n          }\r\n          this.exportData = this.desserts;\r\n          this.fileName = `DRS_${moment(moment().toDate()).format(\r\n            \"MMM_DD_YYYY\"\r\n          )}`;\r\n          console.log(this.desserts);\r\n          // console.log(this.headers);\r\n        })\r\n        .catch((e) => {\r\n          //this.table.loading = false;\r\n          console.log(e);\r\n        });\r\n    },\r\n    getEventColor(event) {\r\n      return event.color;\r\n    },\r\n    rnd(a, b) {\r\n      return Math.floor((b - a + 1) * Math.random()) + a;\r\n    },\r\n    showEvent({ nativeEvent, event }) {\r\n      const open = () => {\r\n        this.selectedEvent = event;\r\n        this.selectedElement = nativeEvent.target;\r\n        requestAnimationFrame(() =>\r\n          requestAnimationFrame(() => (this.selectedOpen = true))\r\n        );\r\n      };\r\n\r\n      if (this.selectedOpen) {\r\n        this.selectedOpen = false;\r\n        requestAnimationFrame(() => requestAnimationFrame(() => open()));\r\n      } else {\r\n        open();\r\n      }\r\n\r\n      nativeEvent.stopPropagation();\r\n    },\r\n    SetSchedule(item) {\r\n      //console.log(\"Schedule\" + item.employeeId);\r\n      this.scheduledData = Object.assign({}, item);\r\n\r\n      this.scheduleDialog.dialog = true;\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}